{
  "protocol": "warp:3.0.0",
  "chain": "multiversx",
  "name": "Colombia Staking: User Stake Calculation",
  "title": "User Stake Calculation",
  "description": "Calculate the user's stake.",
  "actions": [
    {
      "type": "collect",
      "label": "Retrieve Delegations",
      "destination": {
        "url": "https://delegation-api.multiversx.com/providers/erd1qqqqqqqqqqqqqqqpqqqqqqqqqqqqqqqqqqqqqqqqqqqqqallllls5rqmaf/delegations"
      }
    }
  ],
  "output": {
    "DELEGATORS_RAW": "out[1]",
    "DELEGATORS": "transform:() => result.DELEGATORS_RAW.map(delegator => ({ user: delegator.address, amount: delegator.amount }))",
    "TOKEN_HOLDERS_RAW": "out[2]",
    "TOKEN_HOLDERS": "transform:() => result.TOKEN_HOLDERS_RAW.map(holder => ({ user: holder.address, amount: holder.balance }))",
    "STAKERS": "transform:() => [...result.DELEGATORS, ...result.TOKEN_HOLDERS]"
  },
  "next": "@multiversx:peerme-earn-distribute-colombia-staking?user={{STAKERS[].user}}\u0026amount={{STAKERS[].amount}}"
}
